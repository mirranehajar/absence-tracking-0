<div class='app'>
  <div class='app-calendar' *ngIf="calendarVisible">
    <full-calendar
      #calendar
      defaultView="dayGridMonth"
      [header]="{
        left: 'prev,next today',
        center: 'title',
        right: 'dayGridMonth,timeGridWeek,timeGridDay,listWeek'
      }"
      [plugins]="calendarPlugins"
      [weekends]="calendarWeekends"
      [events]="calendarEvents"
      (dateClick)="showBasicDialog($event)"
      (eventClick)="showBasicDialog2($event)">
    </full-calendar>
    <p-dialog  header="Ajout d'une séance" [(visible)]="displayBasic" [style]="{width: '50vw'}" [baseZIndex]="10000">
      <form style="text-align: center" method="POST" >
        <div style="display:inline-block" class="form-group">
          <div class="row">
            <div class="ui-inputgroup">
              <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
              <input type="text" placeholder="Reference" name="reference" [(ngModel)]="session.reference">
            </div>
          </div>
          <br>
          <div class="row">
            <div class="ui-inputgroup">
              <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
              <input type="date" name="dateStart" [(ngModel)]="session.dateStart">
            </div>
          </div>
          <br>
          <div class="row">
            <div class="ui-inputgroup">
              <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
              <input type="number" name="durée" placeholder="La durée de la séance en heures" [(ngModel)]="period">
            </div>
          </div>
          <br>
          <div class="row">
            <div class="ui-inputgroup">
              <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
              <select  name="TypeSession"  [(ngModel)]="session.typeSession" required>
                <option *ngFor="let t of typeSessions" [ngValue]="t">{{t.libelle}}</option>
              </select>
            </div>
          </div>
          <br>
          <div class="row">
            <div class="ui-inputgroup">
              <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
              <mat-form-field>
                <mat-label>Choisir les groupes</mat-label>
                <mat-select [(ngModel)]="session.groupes" name="etudiants" multiple>
                  <mat-option *ngFor="let g of groupes" [value]="g">{{g.libelle}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
        <br>
        <p-footer>
          <button (click)="save()" type="submit" pButton icon="pi pi-check" style="float: left"  label="Enregistrer"></button>
        </p-footer>
      </form>
    </p-dialog>
    <p-dialog  header="Modification d'une séance" [(visible)]="displayBasic2" [style]="{width: '50vw'}" [baseZIndex]="10000">
      <form style="text-align: center" method="POST" >
        <div style="display:inline-block" class="form-group">
          <div class="row">
            <div class="ui-inputgroup">
              <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
              <input type="text" [(ngModel)]="sessionFounded.reference" name="libelle" >
            </div>
          </div>
          <br>
          <div class="row">
            <div class="ui-inputgroup">
              <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
              <input type="text" [(ngModel)]="sessionFounded.libelle" name="libelle" >
            </div>
          </div>
          <br>
          <div class="row">
            <div class="ui-inputgroup">
              <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
              <input type="datetime-local"  [(ngModel)]="sessionFounded.dateStart" name="dateStart">
            </div>
          </div>
          <br>
          <div class="row">
            <div class="ui-inputgroup">
              <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
              <input type="datetime-local" [(ngModel)]="sessionFounded.dateStop"  name="dateStop">
            </div>
          </div>
          <br>
          <div class="row">
            <div class="ui-inputgroup">
              <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
              <select  name="TypeSession" [(ngModel)]="sessionFounded.typeSession" required>
                <option *ngFor="let t of typeSessions" [ngValue]="t">{{t.libelle}}</option>
              </select>
            </div>
          </div>
          <div class="row">
            <div class="ui-inputgroup">
              <span class="ui-inputgroup-addon"><i class="pi pi-user" style="line-height: 1.25;"></i></span>
              <mat-form-field>
                <mat-label>Choisir les groupes </mat-label>
                <mat-select name="groupes" [(ngModel)]="sessionFounded.groupes" multiple>
                  <mat-option *ngFor="let g of groupes" [value]="g">{{g.libelle}}</mat-option>
                </mat-select>
              </mat-form-field>
            </div>
          </div>
        </div>
        <br>
        <p-footer>
          <button (click)="update()" type="submit" pButton icon="pi pi-check" style="float: left"  label="Modifier"></button>
          <button (click)="deleteByReference(sessionFounded)" type="reset" pButton icon="pi pi-check" style="float: right"  label="Supprimer"></button>
        </p-footer>
      </form>
    </p-dialog>
  </div>

</div>
